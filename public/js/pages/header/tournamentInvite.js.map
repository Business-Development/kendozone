{"version":3,"sources":["multiple-emails.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tournamentInvite.js","sourcesContent":["(function( $ ){\r\n\r\n\t$.fn.multiple_emails = function(options) {\r\n\r\n\t\t// Default options\r\n\t\tvar defaults = {\r\n\t\t\tcheckDupEmail: true,\r\n\t\t\ttheme: \"Bootstrap\",\r\n\t\t\tposition: \"top\"\r\n\t\t};\r\n\r\n\t\t// Merge send options with defaults\r\n\t\tvar settings = $.extend( {}, defaults, options );\r\n\r\n\t\tvar deleteIconHTML = \"\";\r\n\t\tif (settings.theme.toLowerCase() == \"Bootstrap\".toLowerCase())\r\n\t\t{\r\n\t\t\tdeleteIconHTML = '<a href=\"#\" class=\"multiple_emails-close\" title=\"Remove\"><span class=\"glyphicon glyphicon-remove\"></span></a>';\r\n\t\t}\r\n\t\telse if (settings.theme.toLowerCase() == \"SemanticUI\".toLowerCase() || settings.theme.toLowerCase() == \"Semantic-UI\".toLowerCase() || settings.theme.toLowerCase() == \"Semantic UI\".toLowerCase()) {\r\n\t\t\tdeleteIconHTML = '<a href=\"#\" class=\"multiple_emails-close\" title=\"Remove\"><i class=\"remove icon\"></i></a>';\r\n\t\t}\r\n\t\telse if (settings.theme.toLowerCase() == \"Basic\".toLowerCase()) {\r\n\t\t\t//Default which you should use if you don't use Bootstrap, SemanticUI, or other CSS frameworks\r\n\t\t\tdeleteIconHTML = '<a href=\"#\" class=\"multiple_emails-close\" title=\"Remove\"><i class=\"basicdeleteicon\">Remove</i></a>';\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\t//$orig refers to the input HTML node\r\n\t\t\tvar $orig = $(this);\r\n\t\t\tvar $list = $('<ul class=\"multiple_emails-ul\" />'); // create html elements - list of email addresses as unordered list\r\n\r\n\t\t\tif ($(this).val() != '' && IsJsonString($(this).val())) {\r\n\t\t\t\t$.each(jQuery.parseJSON($(this).val()), function( index, val ) {\r\n\t\t\t\t\t$list.append($('<li class=\"multiple_emails-email\"><span class=\"email_name\" data-email=\"' + val.toLowerCase() + '\">' + val + '</span></li>')\r\n\t\t\t\t\t\t.prepend($(deleteIconHTML)\r\n\t\t\t\t\t\t\t.click(function(e) { $(this).parent().remove(); refresh_emails(); e.preventDefault(); })\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar $input = $('<input type=\"text\" class=\"multiple_emails-input text-left\" />').on('keyup', function(e) { // input\r\n\t\t\t\t$(this).removeClass('multiple_emails-error');\r\n\t\t\t\tvar input_length = $(this).val().length;\r\n\r\n\t\t\t\tvar keynum;\r\n\t\t\t\tif(window.event){ // IE\t\t\t\t\t\r\n\t\t\t\t\tkeynum = e.keyCode;\r\n\t\t\t\t}\r\n\t\t\t\telse if(e.which){ // Netscape/Firefox/Opera\t\t\t\t\t\r\n\t\t\t\t\tkeynum = e.which;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//if(event.which == 8 && input_length == 0) { $list.find('li').last().remove(); } //Removes last item on backspace with no input\r\n\r\n\t\t\t\t// Supported key press is tab, enter, space or comma, there is no support for semi-colon since the keyCode differs in various browsers\r\n\t\t\t\tif(keynum == 9 || keynum == 32 || keynum == 188) {\r\n\t\t\t\t\tdisplay_email($(this), settings.checkDupEmail);\r\n\t\t\t\t}\r\n\t\t\t\telse if (keynum == 13) {\r\n\t\t\t\t\tdisplay_email($(this), settings.checkDupEmail);\r\n\t\t\t\t\t//Prevents enter key default\r\n\t\t\t\t\t//This is to prevent the form from submitting with  the submit button\r\n\t\t\t\t\t//when you press enter in the email textbox\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t}).on('blur', function(event){\r\n\t\t\t\tif ($(this).val() != '') { display_email($(this), settings.checkDupEmail); }\r\n\t\t\t});\r\n\r\n\t\t\tvar $container = $('<div class=\"multiple_emails-container\" />').click(function() { $input.focus(); } ); // container div\r\n\r\n\t\t\t// insert elements into DOM\r\n\t\t\tif (settings.position.toLowerCase() === \"top\")\r\n\t\t\t\t$container.append($list).append($input).insertAfter($(this));\r\n\t\t\telse\r\n\t\t\t\t$container.append($input).append($list).insertBefore($(this));\r\n\r\n\t\t\t/*\r\n\t\t\t t is the text input device.\r\n\t\t\t Value of the input could be a long line of copy-pasted emails, not just a single email.\r\n\t\t\t As such, the string is tokenized, with each token validated individually.\r\n\r\n\t\t\t If the dupEmailCheck variable is set to true, scans for duplicate emails, and invalidates input if found.\r\n\t\t\t Otherwise allows emails to have duplicated values if false.\r\n\t\t\t */\r\n\t\t\tfunction display_email(t, dupEmailCheck) {\r\n\r\n\t\t\t\t//Remove space, comma and semi-colon from beginning and end of string\r\n\t\t\t\t//Does not remove inside the string as the email will need to be tokenized using space, comma and semi-colon\r\n\t\t\t\tvar arr = t.val().trim().replace(/^,|,$/g , '').replace(/^;|;$/g , '');\r\n\t\t\t\t//Remove the double quote\r\n\t\t\t\tarr = arr.replace(/\"/g,\"\");\r\n\t\t\t\t//Split the string into an array, with the space, comma, and semi-colon as the separator\r\n\t\t\t\tarr = arr.split(/[\\s,;]+/);\r\n\r\n\t\t\t\tvar errorEmails = new Array(); //New array to contain the errors\r\n\r\n\t\t\t\tvar pattern = new RegExp(/^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i);\r\n\r\n\t\t\t\tfor\t(var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t//Check if the email is already added, only if dupEmailCheck is set to true\r\n\t\t\t\t\tif ( dupEmailCheck === true && $orig.val().indexOf(arr[i]) != -1 ) {\r\n\t\t\t\t\t\tif (arr[i] && arr[i].length > 0) {\r\n\t\t\t\t\t\t\tnew function () {\r\n\t\t\t\t\t\t\t\tvar existingElement = $list.find('.email_name[data-email=' + arr[i].toLowerCase().replace('.', '\\\\.').replace('@', '\\\\@') + ']');\r\n\t\t\t\t\t\t\t\texistingElement.css('font-weight', 'bold');\r\n\t\t\t\t\t\t\t\tsetTimeout(function() { existingElement.css('font-weight', ''); }, 1500);\r\n\t\t\t\t\t\t\t}(); // Use a IIFE function to create a new scope so existingElement won't be overriden\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (pattern.test(arr[i]) == true) {\r\n\t\t\t\t\t\t$list.append($('<li class=\"multiple_emails-email\"><span class=\"email_name\" data-email=\"' + arr[i].toLowerCase() + '\">' + arr[i] + '</span></li>')\r\n\t\t\t\t\t\t\t.prepend($(deleteIconHTML)\r\n\t\t\t\t\t\t\t\t.click(function(e) { $(this).parent().remove(); refresh_emails(); e.preventDefault(); })\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\terrorEmails.push(arr[i]);\r\n\t\t\t\t}\r\n\t\t\t\t// If erroneous emails found, or if duplicate email found\r\n\t\t\t\tif(errorEmails.length > 0)\r\n\t\t\t\t\tt.val(errorEmails.join(\"; \")).addClass('multiple_emails-error');\r\n\t\t\t\telse\r\n\t\t\t\t\tt.val(\"\");\r\n\t\t\t\trefresh_emails ();\r\n\t\t\t}\r\n\r\n\t\t\tfunction refresh_emails () {\r\n\t\t\t\tvar emails = new Array();\r\n\t\t\t\tvar container = $orig.siblings('.multiple_emails-container');\r\n\t\t\t\tcontainer.find('.multiple_emails-email span.email_name').each(function() { emails.push($(this).html()); });\r\n\t\t\t\t$orig.val(JSON.stringify(emails)).trigger('change');\r\n\t\t\t}\r\n\r\n\t\t\tfunction IsJsonString(str) {\r\n\t\t\t\ttry { JSON.parse(str); }\r\n\t\t\t\tcatch (e) {\treturn false; }\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn $(this).hide();\r\n\r\n\t\t});\r\n\r\n\t};\r\n\r\n})(jQuery);"],"sourceRoot":"/source/"}